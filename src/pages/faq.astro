---
import DashboardLayout from '../layouts/DashboardLayout.astro';
import Navigation from '../components/Navigation.astro';
---

<DashboardLayout title="FAQ - GTFS Observatory">
  <Navigation currentPath="/faq" />

  <header class="page-header">
    <h1>Frequently Asked Questions</h1>
    <p>Everything you need to know about the GTFS Observatory</p>
  </header>

  <div class="faq-container">
    <section class="faq-section">
      <h2>About GTFS</h2>

      <details>
        <summary>What is GTFS?</summary>
        <div class="faq-answer">
          <p>GTFS (General Transit Feed Specification) is a standardized format for public transportation schedules and geographic information. It allows transit agencies to publish their data in a format that can be consumed by a wide variety of applications.</p>
        </div>
      </details>

      <details>
        <summary>What is the difference between GTFS Schedule and GTFS Realtime?</summary>
        <div class="faq-answer">
          <p><strong>GTFS Schedule</strong> provides  information about routes, schedules, fares, and geographic transit details among many other features, and it is presented in simple text files. 
            These files are updated semi-regularly, depending on the agency. Most agencies will update their GTFS Schedule feed whenever they update their route schedules.</p>
          <p><strong>GTFS Realtime</strong> provides real-time updates about vehicle positions, trip updates, and service alerts. This data is updated continuously throughout the day. 
            These files are presented in the form of <a href="https://developers.google.com/protocol-buffers/">Protocol Buffers</a> and are meant to be machine-readable.</p>
        </div>
      </details>

      <details>
        <summary>What can I do with GTFS data?</summary>
        <div class="faq-answer">
          <p>GTFS data can be used to:</p>
          <ul>
            <li>Build trip planning applications</li>
            <li>Create real-time vehicle tracking displays</li>
            <li>Analyze transit service patterns and performance</li>
            <li>Integrate transit information into mapping applications</li>
            <li>Research transportation accessibility and equity</li>
          </ul>
        </div>
      </details>
    </section>

    <section class="faq-section">
      <h2>Using This Dashboard</h2>

      <details>
        <summary>How often is the data updated?</summary>
        <div class="faq-answer">
          <p>This dashboard is rebuilt periodically to fetch the latest feed information from the MobilityData Mobility Database. The "Last updated" timestamp in the footer shows when the data was last refreshed.</p>
          <p>Per MobilityData: <em><q>The Mobility Database fetches and stores new datasets once a day at midnight UTC.</q></em></p>
        </div>
      </details>

      <details>
        <summary>What do the status indicators mean?</summary>
        <div class="faq-answer">
          <ul>
            <li><strong>Operational:</strong> All feeds are active and available</li>
            <li><strong>Minor Issues:</strong> Some feeds may be marked as "development" or have a mixed status</li>
            <li><strong>Major Issues:</strong> One or more feeds are marked as "inactive" (and don't have an active version) or "deprecated" (and don't have a replacement)</li>
            <li><strong>Unknown:</strong> No feed information is available for this agency</li>
          </ul>
        </div>
      </details>

      <details>
        <summary>What does "Authentication Required" mean?</summary>
        <div class="faq-answer">
          <p>Some feeds require an API key or other authentication to access. This is typically free but requires registration with the transit agency. Click the "Details" link next to the authentication notice to learn how to obtain access.</p>
        </div>
      </details>

      <details>
        <summary>Should I use Mobility Database or Direct downloads?</summary>
        <div class="faq-answer">
          <p><strong>Mobility Database hosted feeds</strong> are archived snapshots that are downloaded and stored by the Mobility Database organization. They're reliable and don't require authentication.
          These feeds are all run through the <a href = "https://gtfs-validator.mobilitydata.org">canonical GTFS validator</a> to determine if they meet the specification.</p>
          <p><strong>Direct downloads</strong> come straight from the transit agency and are typically more up-to-date, but may require authentication and have not been directly validated.</p>
          <p>For most applications, MobilityData hosted feeds are perfectly fine. Use direct feeds if you need the absolute latest data.</p>
        </div>
      </details>
    </section>

    <section class="faq-section">
      <h2>Technical Details</h2>

      <details>
        <summary>Where does the data come from?</summary>
        <div class="faq-answer">
          <p>All feed information is sourced from the <a href="https://mobilitydatabase.org" target="_blank" rel="noopener">Mobility Database</a>, a comprehensive catalog of open mobility data maintained by MobilityData.</p>
        </div>
      </details>

      <details>
        <summary>What are validation errors and warnings?</summary>
        <div class="faq-answer">
          <p><strong>Errors</strong> are critical issues that prevent the feed from working correctly in applications. These should be fixed by the transit agency.</p>
          <p><strong>Warnings</strong> are best practice violations that won't break applications but may cause suboptimal behavior.</p>
          <p>A small number of warnings is normal. Multiple errors usually indicates an issue with the way the feed was generated.</p>
        </div>
      </details>

      <details>
        <summary>Can I use GTFS data commercially?</summary>
        <div class="faq-answer">
          <p>Most GTFS feeds are published under open licenses that allow commercial use, but you should check the specific license for each feed. License information is displayed in the feed details when available.</p>
        </div>
      </details>
    </section>

    <section class="faq-section">
      <h2>Resources</h2>

      <details>
        <summary>Where can I learn more about GTFS?</summary>
        <div class="faq-answer">
          <ul>
            <li><a href="https://gtfs.org" target="_blank" rel="noopener">GTFS.org</a> - Official specification and documentation</li>
            <li><a href="https://mobilitydata.org" target="_blank" rel="noopener">MobilityData</a> - The organization that manages the GTFS standard and the Mobility Database</li>
            <li><a href="https://mobilitydatabase.org" target="_blank" rel="noopener">Mobility Database</a> - Global database of transit and mobility feeds - the source for this dashboard</li>
            <li><a href="https://github.com/MobilityData/awesome-transit" target="_blank" rel="noopener">awesome-transit</a> - Community list of transit APIs, apps, datasets, research, and software</li>
            <li><a href="https://gtfs-validator.mobilitydata.org" target="_blank" rel="noopener">GTFS Validator</a> - Tool for validating GTFS feeds</li>
          </ul>
        </div>
      </details>
    </section>

    <section class="faq-section">
      <h2>For transit data nerds:</h2>

      <details>
        <summary>Can I deploy my own instance of this dashboard for my region?</summary>
        <div class="faq-answer">
          <p>Absolutely! The source code for this dashboard will <em>soon</em> be available on <a href="https://github.com/jasonad123/gtfs-observatory">GitHub</a> and will be made available under the GNU GPLv3 license.</p>
        </div>
      </details>
    </section>
  </div>
</DashboardLayout>

<style>
  .page-header {
    text-align: start;
    margin: 3rem 0;
    padding: 0 1rem;
  }

  .page-header h1 {
    margin-bottom: 0.5rem;
  }

  .page-header p {
    color: var(--pico-muted-color);
    font-size: 1.1rem;
  }

  .faq-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 1rem 3rem;
  }

  .faq-section {
    margin-bottom: 4rem;
  }

  .faq-section h2 {
    margin-bottom: 2rem;
    padding-bottom: 0.75rem;
    border-bottom: 2px solid var(--pico-primary);
  }

  details {
    margin-bottom: 1.5rem;
    padding: 1.5rem;
    border: 1px solid var(--pico-muted-border-color);
    border-radius: var(--pico-border-radius);
    background-color: var(--pico-card-background-color);
  }

  summary {
    cursor: pointer;
    font-weight: 600;
    user-select: none;
    font-size: 1.05rem;
    color: var(--pico-color-jade-500);
  }

  summary:hover {
    color: var(--pico-primary);
  }

  .faq-answer {
    margin-top: 1rem;
    padding-top: 1rem;
    border-top: 1px solid var(--pico-muted-border-color);
    line-height: 1.6;
  }

  .faq-answer p {
    margin: 0.75rem 0;
  }

  .faq-answer ul {
    margin: 0.75rem 0;
    padding-left: 1.5rem;
  }

  .faq-answer li {
    margin: 0.5rem 0;
  }

  .faq-answer a {
    color: var(--pico-primary);
  }

  @media (max-width: 768px) {
    .page-header {
      margin: 2rem 0;
    }

    .page-header h1 {
      font-size: 1.75rem;
    }
  }
</style>
